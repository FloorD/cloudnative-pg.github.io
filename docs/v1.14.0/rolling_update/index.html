<!DOCTYPE html>




<html lang="en">

<head>
  <title>CloudNative PG</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta name="description" content="CloudNativePG is the Kubernetes operator that covers the full lifecycle of a highly available PostgreSQL database cluster with a primary/standby architecture, using native streaming replication." />
  <meta name="keywords" content="" />
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet" />
  <link href="/main.min.css" rel="stylesheet" />
  <link rel="favicon" href="/favicon/favicon.ico">
</head>

<body>
  <div class="h-screen w-screen">
    
<main>
  <header>
    <div class="flex flex-row px-16 justify-between py-5">
      <div>
        
        <a href="/"><img src="/logo/large_logo.svg" class="h-14" alt="Cloud Native Postgres Logo"></a>
      </div>
      <div>
        <ul class="flex gap-14 text-2xl text-slate-400 my-5">
          <li><a href="/docs/1.15.0/" target="_blank">Documentation</a></li>
          <li>Support</li>
          <li>End users</li>
          <li>Blog</li>
        </ul>
      </div>
      <div class="flex gap-5 my-4">
        <a href="https://github.com/cloudnative-pg/cloudnative-pg">
          <img src="/icons/Git.svg" alt="Github">
        </a>
        <a href="https://cloudnativepg.slack.com/">
          <img src="/icons/Slack.svg" alt="Slack">
        </a>
        <a href="https://twitter.com/CloudNativePg">
          <img src="/icons/Twitter.svg" alt="Twitter">
        </a>
        <a href="https://www.youtube.com/channel/UCTGH88W1BiuRRPTzJUDPJyA">
          <img src="/icons/YouTube.svg" alt="YouTube">
        </a>
      </div>
    </div>
  </header>
</main>


    
<h2 class="text-2xl"></h2>
<h1 id="rolling-updates">Rolling Updates</h1>
<p>The operator allows changing the PostgreSQL version used in a cluster while
applications are running against it.</p>
<p>!!! Important
Only upgrades for PostgreSQL minor releases are supported.</p>
<p>Rolling upgrades are started when:</p>
<ul>
<li>
<p>the user changes the <code>imageName</code> attribute of the cluster specification;</p>
</li>
<li>
<p>a change in the PostgreSQL configuration requires a restart to be
applied;</p>
</li>
<li>
<p>a change on the <code>Cluster</code> <code>.spec.resources</code> values</p>
</li>
<li>
<p>a change in size of the persistent volume claim on AKS</p>
</li>
<li>
<p>after the operator is updated, to ensure the Pods run the latest instance
manager (unless <a href="installation_upgrade.md#in-place-updates-of-the-instance-manager">in-place updates are enabled</a>).</p>
</li>
</ul>
<p>The operator starts upgrading all the replicas, one Pod at a time, starting
from the one with the highest serial.</p>
<p>The primary is the last node to be upgraded. This operation is configurable and
managed by the <code>primaryUpdateStrategy</code> option, accepting these two values:</p>
<ul>
<li><code>unsupervised</code>: the rolling update process is managed by Kubernetes
and is entirely automated, with the <em>switchover</em> operation
starting once all the replicas have been upgraded</li>
<li><code>supervised</code>: the rolling update process is suspended immediately
after all replicas have been upgraded and can only be completed
with a manual switchover triggered by an administrator with
<code>kubectl cnp promote [cluster] [pod]</code>. The plugin can be downloaded from the
<a href="https://github.com/EnterpriseDB/kubectl-cnp"><code>kubectl-cnp</code> project page</a>
on GitHub.</li>
</ul>
<p>The default and recommended value is <code>unsupervised</code>.</p>
<p>The upgrade keeps the Cloud Native PostgreSQL identity and does not
re-clone the data. Pods will be deleted and created again with the same PVCs.</p>
<p>During the rolling update procedure, the services endpoints move to reflect
the cluster&rsquo;s status, so the applications ignore the node that
is updating.</p>



    <footer class="text-center p-24">
    <div>
        <a href="#" class="bg-rose-600 py-4 px-12 rounded-full text-white text-xl">View on GitHub</a>
    </div>
    <p class="text-sm text-slate-600 w-1/2 mx-auto pt-10">&copy; 2019-2022 The CloudNativePG Contributors<br/>
    The Linux Foundation has registered trademarks and uses trademarks. 
    For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage/" class="text-rose-600">Trademark Usage page</a>.<br/>
    Postgres, PostgreSQL and the Slonik Logo are trademarks or registered trademarks of the PostgreSQL Community Association of Canada, and used with their permission.
    </p>
</footer>

  </div>
  
  <script src="https://cdn.usefathom.com/script.js" data-site="GSMQCVAJ" defer></script>
  
</body>

</html>